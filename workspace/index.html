<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CoreSystem ‚Äî Visual Layout Workspace</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     App Shell ‚Äî 3-column + toolbar grid
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app-shell">

  <!-- ‚îÄ‚îÄ Toolbar (top) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <header id="app-toolbar" aria-label="Main toolbar"></header>

  <!-- ‚îÄ‚îÄ Left Column (Toolbox + Layers) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="app-left">
    <!-- Toolbox: predefined component types -->
    <div id="app-toolbox" aria-label="Component toolbox"></div>
    <!-- Layers: z-ordered element list -->
    <div id="app-layers" aria-label="Layers"></div>
  </div>

  <!-- ‚îÄ‚îÄ Canvas Area ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="canvas-area" class="grid-visible">
    <!-- Grid overlay (controlled by canvasEngine CSS vars) -->
    <div id="canvas-grid" aria-hidden="true"></div>

    <!-- Scroll/pan viewport -->
    <div id="canvas-viewport" aria-label="Drawing canvas">
      <!-- Transform target (zoom + pan) -->
      <div id="canvas-content">
        <!-- Elements rendered here dynamically by Workspace -->
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Right Properties Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <aside id="app-props" aria-label="Properties panel"></aside>

</div><!-- /#app-shell -->


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Context Menu
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav id="ctx-menu" aria-label="Context menu">
  <div class="ctx-item" data-ctx="dup">‚äï Duplicate</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item" data-ctx="front">‚¨Ü Bring to Front</div>
  <div class="ctx-item" data-ctx="fwd">‚Üë Bring Forward</div>
  <div class="ctx-item" data-ctx="bwd">‚Üì Send Backward</div>
  <div class="ctx-item" data-ctx="back">‚¨á Send to Back</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item" data-ctx="lock">üîí Lock / Unlock</div>
  <div class="ctx-item" data-ctx="hide">üëÅ Hide / Show</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item" data-ctx="analyze">‚öô Analyze Layout</div>
  <div class="ctx-item" data-ctx="select-all">‚äû Select All</div>
  <div class="ctx-sep"></div>
  <div class="ctx-item ctx-item--danger" data-ctx="delete">‚úï Delete</div>
</nav>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Code Modal
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="modal-code" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Generated code">
  <div class="modal-box">
    <div class="modal-header">
      <span class="modal-title">‚ü®/‚ü© Generated Code</span>
      <div style="display:flex;gap:8px;align-items:center">
        <button class="tb-btn tb-btn--success" onclick="CodeGen.downloadZip('my-layout')">‚¨á Download ZIP</button>
        <button class="modal-close" data-close>‚úï</button>
      </div>
    </div>

    <!-- Tab bar -->
    <div class="modal-tabs">
      <button class="code-tab is-active" data-tab="html">index.html</button>
      <button class="code-tab" data-tab="css">styles.css</button>
      <button class="code-tab" data-tab="js">script.js</button>
      <div class="modal-tab-actions">
        <button class="tb-btn tb-btn--sm" data-copy>‚éò Copy</button>
        <button class="tb-btn tb-btn--sm" data-download="html">‚¨á File</button>
      </div>
    </div>

    <!-- Panes -->
    <div class="modal-body">
      <div class="code-pane is-active" data-tab-pane="html">
        <pre><code></code></pre>
      </div>
      <div class="code-pane" data-tab-pane="css">
        <pre><code></code></pre>
      </div>
      <div class="code-pane" data-tab-pane="js">
        <pre><code></code></pre>
      </div>
    </div>
  </div>
</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Preview Modal
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="modal-preview" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Layout preview">
  <div class="modal-box modal-box--wide" style="max-height:96vh;height:96vh;">

    <!-- Header -->
    <div class="modal-header">
      <span class="modal-title">‚ñ∂ Layout Preview</span>
      <div id="preview-zoom-badge" class="preview-zoom-badge">100%</div>
      <div style="margin-left:auto;display:flex;gap:8px;align-items:center;">
        <button class="tb-btn tb-btn--accent" onclick="CodeGen.downloadZip('my-layout')">‚¨á Export ZIP</button>
        <button class="modal-close" data-close>‚úï</button>
      </div>
    </div>

    <!-- Device & viewport bar -->
    <div class="preview-bar">
      <div class="preview-devices">
        <button class="preview-vp-btn" data-vp="375x812"  title="iPhone 14 Pro">
          <span class="pvp-icon">üì±</span><span class="pvp-label">Mobile</span><span class="pvp-size">375</span>
        </button>
        <button class="preview-vp-btn" data-vp="768x1024" title="iPad">
          <span class="pvp-icon">üìü</span><span class="pvp-label">Tablet</span><span class="pvp-size">768</span>
        </button>
        <button class="preview-vp-btn is-active" data-vp="1440x900" title="Desktop 1440">
          <span class="pvp-icon">üñ•</span><span class="pvp-label">Desktop</span><span class="pvp-size">1440</span>
        </button>
        <button class="preview-vp-btn" data-vp="1920x1080" title="Full HD">
          <span class="pvp-icon">‚¨õ</span><span class="pvp-label">Full HD</span><span class="pvp-size">1920</span>
        </button>
      </div>
      <!-- Fake address bar -->
      <div class="preview-addressbar">
        <span class="preview-addressbar__lock">üîí</span>
        <span class="preview-addressbar__url">preview.coresystem.local</span>
      </div>
    </div>

    <!-- Canvas -->
    <div class="preview-iframe-wrap">
      <div class="preview-browser-chrome" id="preview-browser-chrome">
        <div class="pbc-dots">
          <span class="pbc-dot pbc-dot--red"></span>
          <span class="pbc-dot pbc-dot--yellow"></span>
          <span class="pbc-dot pbc-dot--green"></span>
        </div>
        <div class="pbc-title" id="pbc-title">Layout Preview</div>
      </div>
      <iframe id="preview-iframe"
              title="Layout preview"
              sandbox="allow-scripts allow-same-origin"
              width="1440" height="900">
      </iframe>
    </div>

  </div>
</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Script loading ‚Äî dependency order
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- Engine: foundation layer (no dependencies) -->
<script src="engine/stateManager.js"></script>
<script src="engine/historyManager.js"></script>
<script src="engine/canvasEngine.js"></script>
<script src="engine/snappingEngine.js"></script>
<script src="engine/resizeEngine.js"></script>
<script src="engine/dragEngine.js"></script>
<script src="engine/layoutAnalyzer.js"></script>
<script src="engine/responsiveEngine.js"></script>
<script src="engine/codeGenerator.js"></script>

<!-- UI: depends on engines -->
<script src="ui/toolbar.js"></script>
<script src="ui/toolbox.js"></script>
<script src="ui/layersPanel.js"></script>
<script src="ui/propertiesPanel.js"></script>
<script src="ui/workspace.js"></script>

<!-- Boot -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  Workspace.init();
  console.log('%cCoreSystem Visual Workspace ‚Äî ready', 'color:#58A6FF;font-weight:bold;font-size:14px');
  console.log('%cKeyboard shortcuts:', 'color:#7D8590;font-size:12px');
  console.log('%c  V = Select  R = Draw  H = Hand', 'color:#7D8590;font-size:11px');
  console.log('%c  G = Grid  Del = Delete selected', 'color:#7D8590;font-size:11px');
  console.log('%c  Ctrl+Z/Y = Undo/Redo  Ctrl+D = Duplicate', 'color:#7D8590;font-size:11px');
  console.log('%c  Ctrl+A = Select all  Esc = Deselect', 'color:#7D8590;font-size:11px');
  console.log('%c  Arrows = Nudge (Shift+Arrow = 10px)', 'color:#7D8590;font-size:11px');
  console.log('%c  Space+Drag = Pan  Scroll = Zoom', 'color:#7D8590;font-size:11px');
  console.log('%c  Double-click box = Rename  Alt+Drag = Duplicate', 'color:#7D8590;font-size:11px');
});
</script>

</body>
</html>
